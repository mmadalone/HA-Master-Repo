blueprint:
  name: Rick wake-up helper â€“ TTS + Alexa music (v2.0)
  description: |
    ![Rick wake-up helper](https://raw.githubusercontent.com/mmadalone/HA-Master-Repo/main/images/header/rickyellsplusalexa-header.jpeg)

    ## Rick wake-up helper â€“ TTS + Alexa music

    A reusable **script blueprint** that does two things in sequence:

    1. Uses your ElevenLabs (or other) TTS entity to make "Rick" speak on a
       chosen media player.
    2. After a configurable delay, sends two text commands to a chosen Alexa
       device â€” one to set volume, one to start a song / playlist / station.

    Call this script from any automation: morning routines, pomodoro overruns,
    idle-too-long reminders, bedtime nudges, etc.

    ### Requirements
    - A TTS entity that supports `tts.speak` (e.g. ElevenLabs).
    - A `media_player` where Rick should speak.
    - **Alexa Devices** integration exposing `alexa_devices.send_text_command`.

    ### Version / Changelog
    - **v2.0** â€” Full style-guide compliance rewrite: collapsible sections,
      `action:` syntax, aliases, `continue_on_error`, device selector filter,
      header image, version tagging.
    - **v1.0** â€” Initial release.

  domain: script
  source_url: https://github.com/mmadalone/HA-Master-Repo/blob/main/script/rickyellsplusalexa.yaml

  input:
    tts_settings:
      name: "ðŸŽ™ï¸ TTS Configuration"
      icon: mdi:account-voice
      collapsed: false
      input:
        tts_engine:
          name: TTS entity (Rick voice)
          description: >
            Your ElevenLabs (or other) TTS entity used with `tts.speak`.
          default:
          selector:
            entity:
              domain: tts

        tts_output_player:
          name: Media player for Rick's voice
          description: >
            Media player where Rick should yell at you.
          default:
          selector:
            entity:
              domain: media_player

        tts_message:
          name: Rick's message
          description: >
            The text Rick will shout. Customize freely per script instance.
          default: >
            Hey Miquel, it's after eight. Get your lazy carbon-based ass out of bed
            before I start charging you rent for lying there. Come on, I know you
            hate your job but get up! Come on, get up and start your day! Come on
            Come on Come on Come on!
          selector:
            text:
              multiline: true

        tts_voice_profile:
          name: TTS voice profile
          description: >
            Value sent as `options.voice_profile` to your TTS service.
          default: "Rick Sanchez - Custom 11"
          selector:
            text:
              multiline: false

    alexa_settings:
      name: "ðŸ“» Alexa Configuration"
      icon: mdi:speaker-wireless
      collapsed: true
      input:
        alexa_delay_after_tts:
          name: Delay before Alexa commands (seconds)
          description: >
            How long to wait after Rick finishes yelling before sending the
            Alexa commands (volume + song).
          default: 40
          selector:
            number:
              min: 0
              max: 600
              unit_of_measurement: s
              mode: slider

        alexa_device:
          name: Alexa device
          description: >
            Alexa device that should receive the text commands. Must be
            supported by `alexa_devices.send_text_command`.
          default:
          selector:
            device:
              integration: alexa_devices

        alexa_volume_command:
          name: Alexa volume command
          description: >
            Text command to set the volume before music starts.
          default: "set volume to 10"
          selector:
            text:
              multiline: false

        alexa_song_command:
          name: Alexa play command
          description: >
            Text command to start your wake-up song / playlist.
          default: "play Mark on the bus by the Beastie Boys"
          selector:
            text:
              multiline: false

mode: single

sequence:
  - alias: "Rick TTS speak on media player"
    action: tts.speak
    target:
      entity_id: !input tts_engine
    data:
      media_player_entity_id: !input tts_output_player
      message: !input tts_message
      options:
        voice_profile: !input tts_voice_profile
    continue_on_error: true

  - alias: "Delay before Alexa commands"
    delay:
      seconds: !input alexa_delay_after_tts

  - alias: "Alexa set volume"
    action: alexa_devices.send_text_command
    data:
      device_id: !input alexa_device
      text_command: !input alexa_volume_command
    continue_on_error: true

  - alias: "Alexa play wake-up music"
    action: alexa_devices.send_text_command
    data:
      device_id: !input alexa_device
      text_command: !input alexa_song_command
    continue_on_error: true
